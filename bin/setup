#!/bin/bash

PCRE_VERSION=pcre-8.37
PCRE_ARC="$PCRE_VERSION.tar.bz2"
PCRE_URL="ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/$PCRE_ARC"

function install_pcre(){
    cd $OPENSHIFT_TMP_DIR

    wget "$PCRE_URL"
    
    tar jxf "$PCRE_ARC"

    rm "$PCRE_ARC"
}

function install_nginx(){

    install_pcre

    cd $OPENSHIFT_TMP_DIR

    wget http://nginx.org/download/nginx-1.9.9.tar.gz
    
    tar zxf nginx-1.9.9.tar.gz
    
    rm nginx-1.9.9.tar.gz

    cd nginx-1.9.9/

    ./configure --prefix="$OPENSHIFT_DATA_DIR" --with-pcre="$OPENSHIFT_TMP_DIR/$PCRE_VERSION"

    make install
}

source ${OPENSHIFT_HOMEDIR}/nginx-node-pm2-issuetracker/bin/util

create_npm_dir
