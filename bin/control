#!/bin/bash

function pre_build(){
    #!/bin/bash

    cache_dir=${OPENSHIFT_DEPENDENCIES_DIR}/
    env_dir =${OPENSHIFT_HOMEDIR}

    echo "production"                              > ${env_dir}/NODE_ENV
    echo ${OPENSHIFT_DATA_DIR}.nodejs/.npm         > ${env_dir}/npm_config_cache
    echo ${OPENSHIFT_DATA_DIR}.nodejs/.npmrc       > ${env_dir}/npm_config_userconfig
    echo ${OPENSHIFT_DATA_DIR}.nodejs/.npmignore   > ${env_dir}/npm_config_userignorefile
    echo ${OPENSHIFT_DATA_DIR}.nodejs/.npm-init.js > ${env_dir}/npm_config_init_module
    echo ${TMP}                                    > ${env_dir}/npm_config_tmp
}

function build(){
    cd ${OPENSHIFT_REPO_DIR}
    npm install --production
}

function start(){
    echo "Starting"
}

function stop(){
    echo "stopping"
}

function restart(){
    echo "restarting"
}

case ${1} in
  #pre-repo-archive) pre-repo-archive ;;
  build)            build            ;;
  start)            start            ;;
  stop)             stop             ;;
  restart)          restart          ;;
  #status)           status           ;;
  #tidy)             tidy             ;;
  *)                exit 0
esac


